Positive	Negative	Text
3	-3	### SUMMARY  Currently the temporal wrapper class used by the sqla model returns `Type[TypeEngine]`, although it should be returning an instantiated `TypeEngine`, which results in an incorrect string representation of the type object. This doesn't affect regular query generation (the types and instances can mostly be used interchangeably when writing SqlAlchemy code), but causes trouble in the Presto db engine spec here: https://github.com/apache/superset/blob/3fe2e6ec731529ae228904b9b5e39baec073ae8d/superset/db_engine_specs/presto.py#L385-L407  and more specifically here (notice how the expected data type for `data_type` is `types.TypeEngine`, not `Type[types.TypeEngine]`): https://github.com/apache/superset/blob/3fe2e6ec731529ae228904b9b5e39baec073ae8d/superset/db_engine_specs/presto.py#L293-L303  Without this fix the new test fails with the following error:  ``` >       assert str(new_type) == str(orig_type) E       assert "<class 'supe...WrapperType'>" == 'DATETIME' E         - DATETIME E         + <class 'superset.models.sql_types.base.literal_dttm_type_factory.<locals>.TemporalWrapperType'> ```  ### BEFORE/AFTER SCREENSHOTS OR ANIMATED GIF <!--- Skip this if not applicable -->  ### TESTING INSTRUCTIONS <!--- Required! What steps can be taken to manually verify the changes? -->  ### ADDITIONAL INFORMATION <!--- Check any relevant boxes with "x" --> <!--- HINT: Include "Fixes #nnn" if you are fixing an existing issue --> - [x] Has associated issue: closes #16258 - [ ] Required feature flags: - [ ] Changes UI - [ ] Includes DB Migration (follow approval process in [SIP-59](https://github.com/apache/superset/issues/13351))   - [ ] Migration is atomic, supports rollback & is backwards-compatible   - [ ] Confirm DB migration upgrade and downgrade tested   - [ ] Runtime estimates and downtime expectations provided - [ ] Introduces new feature or API - [ ] Removes existing feature or API  
2	-2	# [Codecov](https://codecov.io/gh/apache/superset/pull/16614?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report > Merging [#16614](https://codecov.io/gh/apache/superset/pull/16614?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b8df03e) into [master](https://codecov.io/gh/apache/superset/commit/3fe2e6ec731529ae228904b9b5e39baec073ae8d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3fe2e6e) will **decrease** coverage by `0.21%`. > The diff coverage is `100.00%`.  [![Impacted file tree graph](https://codecov.io/gh/apache/superset/pull/16614/graphs/tree.svg?width=650&height=150&src=pr&token=KsB0fHcx6l&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/superset/pull/16614?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)  ```diff @@            Coverage Diff             @@ ##           master   #16614      +/-   ## ========================================== - Coverage   76.73%   76.51%   -0.22%      ==========================================   Files        1003     1003                 Lines       53875    53875                 Branches     7289     7289               ========================================== - Hits        41343    41225     -118      - Misses      12292    12410     +118        Partials      240      240               ```  | Flag | Coverage Δ | | |---|---|---| | hive | `?` | | | mysql | `81.54% <100.00%> (ø)` | | | postgres | `81.60% <100.00%> (ø)` | | | presto | `?` | | | python | `81.69% <100.00%> (-0.43%)` | :arrow_down: | | sqlite | `81.25% <100.00%> (ø)` | |  Flags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.  | [Impacted Files](https://codecov.io/gh/apache/superset/pull/16614?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | | |---|---|---| | [superset/db\_engine\_specs/base.py](https://codecov.io/gh/apache/superset/pull/16614/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3VwZXJzZXQvZGJfZW5naW5lX3NwZWNzL2Jhc2UucHk=) | `88.00% <ø> (-0.39%)` | :arrow_down: | | [superset/models/sql\_types/base.py](https://codecov.io/gh/apache/superset/pull/16614/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3VwZXJzZXQvbW9kZWxzL3NxbF90eXBlcy9iYXNlLnB5) | `52.63% <100.00%> (ø)` | | | [superset/db\_engines/hive.py](https://codecov.io/gh/apache/superset/pull/16614/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3VwZXJzZXQvZGJfZW5naW5lcy9oaXZlLnB5) | `0.00% <0.00%> (-82.15%)` | :arrow_down: | | [superset/db\_engine\_specs/hive.py](https://codecov.io/gh/apache/superset/pull/16614/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3VwZXJzZXQvZGJfZW5naW5lX3NwZWNzL2hpdmUucHk=) | `69.80% <0.00%> (-16.87%)` | :arrow_down: | | [superset/db\_engine\_specs/presto.py](https://codecov.io/gh/apache/superset/pull/16614/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3VwZXJzZXQvZGJfZW5naW5lX3NwZWNzL3ByZXN0by5weQ==) | `83.47% <0.00%> (-6.91%)` | :arrow_down: | | [superset/views/database/mixins.py](https://codecov.io/gh/apache/superset/pull/16614/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3VwZXJzZXQvdmlld3MvZGF0YWJhc2UvbWl4aW5zLnB5) | `81.03% <0.00%> (-1.73%)` | :arrow_down: | | [superset/connectors/sqla/models.py](https://codecov.io/gh/apache/superset/pull/16614/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3VwZXJzZXQvY29ubmVjdG9ycy9zcWxhL21vZGVscy5weQ==) | `88.04% <0.00%> (-1.66%)` | :arrow_down: | | [superset/models/core.py](https://codecov.io/gh/apache/superset/pull/16614/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3VwZXJzZXQvbW9kZWxzL2NvcmUucHk=) | `89.14% <0.00%> (-0.26%)` | :arrow_down: | | [superset/utils/core.py](https://codecov.io/gh/apache/superset/pull/16614/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3VwZXJzZXQvdXRpbHMvY29yZS5weQ==) | `89.76% <0.00%> (-0.13%)` | :arrow_down: |  ------  [Continue to review full report at Codecov](https://codecov.io/gh/apache/superset/pull/16614?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) > `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data` > Powered by [Codecov](https://codecov.io/gh/apache/superset/pull/16614?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [3fe2e6e...b8df03e](https://codecov.io/gh/apache/superset/pull/16614?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).  
